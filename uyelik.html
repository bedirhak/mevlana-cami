<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="page.membership.title">Üyelik - Diyanet Mevlana Moske</title>
    <link rel="stylesheet" href="style/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="header-left">
                <img src="assets/images/logo.png" alt="Logo" class="logo">
                <h1 class="site-title" data-translate="header.title">Diyanet Mevlana Moske</h1>
            </div>
            <nav class="header-nav">
                <div class="language-switcher">
                    <button class="lang-btn active" data-lang="tr">TR</button>
                    <button class="lang-btn" data-lang="no">NO</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>
                <div class="menu-toggle">
                    <i class="fa-solid fa-bars mobile-menu-icon"></i>
                    <span class="menu-text" data-translate="nav.menu">Meny</span>
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html" data-translate="nav.home">Ana Sayfa</a></li>
                    <li><a href="hakkimizda.html" data-translate="nav.about">Hakkımızda</a></li>
                    <li><a href="cami-insaati.html" data-translate="nav.construction">Cami İnşaatı</a></li>
                    <li class="nav-dropdown">
                        <a href="#" data-translate="nav.education">Eğitim</a>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                        <ul class="dropdown-menu">
                            <li><a href="dershane.html" data-translate="nav.education.dershane">Dershane</a></li>
                            <li><a href="norveccce-dersleri.html" data-translate="nav.education.norwegian">Norveççe
                                    Dersleri</a></li>
                            <li><a href="kuran-kursu.html" data-translate="nav.education.quran">Kuran Kursu</a></li>
                        </ul>
                    </li>
                    <li><a href="uyelik.html" data-translate="nav.membership">Üyelik</a></li>
                    <li><a href="aktiviteler.html" data-translate="nav.activities">Aktiviteler</a></li>
                    <li><a href="cenaze-fonu.html" data-translate="nav.funeral.fund">Cenaze Fonu</a></li>
                    <li><a href="namaz-vakitleri.html" data-translate="nav.prayer">Namaz Vakitleri</a></li>
                    <li><a href="hac.html" data-translate="nav.hac">Hac & Umre</a></li>
                    <li><a href="iletisim.html" data-translate="nav.contact">İletişim</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main class="main-content">
        <section class="page-header membership-header">
            <div class="container">
                <h1 data-translate="membership.title">🤝 Cami Üyeliği</h1>
                <p data-translate="membership.subtitle">Camimize üye olun ve toplumumuzun bir parçası olun</p>
            </div>
        </section>


        <section class="membership-intro">
            <div class="container">
                <div class="intro-content">
                    <div class="intro-text">
                        <h2 data-translate="membership.intro.title">Camimize Hoş Geldiniz</h2>
                        <p data-translate="membership.intro.text">
                            Diyanet Mevlana Moske ailesi olarak sizleri aramızda görmekten büyük mutluluk duyuyoruz.
                            Üye olarak camimizin faaliyetlerinden haberdar olabilir, etkinliklerimize katılabilir
                            ve toplumumuzun güçlü bağlarını daha da sağlamlaştırabilirsiniz.
                        </p>

                    </div>
                    <div class="intro-visual">
                        <div class="membership-icon">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="registration-options">
            <div class="container">
                <div class="registration-info">
                    <h2 data-translate="membership.registration.title">📝 Üyelik Başvuru Seçenekleri</h2>
                    <p data-translate="membership.registration.description">
                        Üye olmak için aşağıdaki seçeneklerden birini kullanabilirsiniz:
                    </p>

                    <div class="registration-methods">
                        <div class="method-card">
                            <div class="method-icon">
                                <i class="fas fa-computer"></i>
                            </div>
                            <h3 data-translate="membership.registration.online.title">Online Başvuru</h3>
                            <p data-translate="membership.registration.online.description">
                                Aşağıdaki formu site üzerinden doldurup gönderin. Hızlı ve pratik bir yöntemdir.
                            </p>
                            <a href="#membershipForm" class="method-btn primary">
                                <i class="fas fa-arrow-down"></i>
                                <span data-translate="membership.registration.online.button">Formu Doldur</span>
                            </a>
                        </div>

                        <div class="method-card">
                            <div class="method-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <h3 data-translate="membership.registration.pdf.title">PDF Form İndir</h3>
                            <p data-translate="membership.registration.pdf.description">
                                Formu indirin, doldurun ve <strong>leder@mevlanamoske.no</strong> mailine gönderin.
                            </p>
                            <button class="method-btn secondary" id="downloadFormBtn">
                                <i class="fas fa-download"></i>
                                <span data-translate="membership.registration.pdf.button">Formu İndir</span>
                            </button>
                        </div>
                    </div>

                    <div class="contact-note">
                        <i class="fas fa-info-circle"></i>
                        <p data-translate="membership.registration.note">
                            Her iki yöntem de aynı şekilde işleme alınacaktır. Size en uygun olanını seçebilirsiniz.
                        </p>
                    </div>
                </div>
            </div>
        </section>



        <section class="membership-form-section">
            <div class="container">
                <div class="form-wrapper">
                    <div class="form-header">
                        <h2 data-translate="membership.form.title">📝 Üyelik Başvuru Formu</h2>
                        <p data-translate="membership.form.description">
                            Lütfen aşağıdaki bilgileri eksiksiz olarak doldurun.
                            Kişisel bilgileriniz gizli tutulacak ve sadece cami faaliyetleri için kullanılacaktır.
                        </p>
                    </div>

                    <form class="membership-form" id="membershipForm"
                        action="https://formsubmit.co/ledermevlanamoske@gmail.com" method="POST">
                        <!-- FormSubmit hidden fields -->
                        <input type="hidden" name="_subject" value="Üyelik Formu - Diyanet Mevlana Moske">
                        <input type="hidden" name="_template" value="table">
                        <input type="hidden" name="_next" value="https://mevlanastavanger.no/uyelik.html?success=true">
                        <input type="hidden" name="_captcha" value="true">

                        <div class="form-group radio-group">
                            <label class="radio-group-label" data-translate="membership.form.type.label">İşlem
                                Türü</label>
                            <div class="radio-options">
                                <label class="radio-label">
                                    <input type="radio" name="islem_turu" value="Yeni Üyelik" checked>
                                    <span class="radio-checkmark"></span>
                                    <span data-translate="membership.form.type.new">Yeni Üyelik</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="islem_turu" value="Üyelik İptal">
                                    <span class="radio-checkmark"></span>
                                    <span data-translate="membership.form.type.cancel">Üyelik İptal</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName" data-translate="membership.form.firstName.label">Ad</label>
                                <input type="text" id="firstName" name="ad" required
                                    data-translate-placeholder="membership.form.firstName.placeholder">
                                <i class="fas fa-user form-icon"></i>
                            </div>
                            <div class="form-group">
                                <label for="lastName" data-translate="membership.form.lastName.label">Soyad</label>
                                <input type="text" id="lastName" name="soyad" required
                                    data-translate-placeholder="membership.form.lastName.placeholder">
                                <i class="fas fa-user form-icon"></i>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="email" data-translate="membership.form.email.label">E-posta</label>
                                <input type="email" id="email" name="email" required
                                    data-translate-placeholder="membership.form.email.placeholder">
                                <i class="fas fa-envelope form-icon"></i>
                            </div>
                            <div class="form-group">
                                <label for="phone" data-translate="membership.form.phone.label">Telefon</label>
                                <input type="tel" id="phone" name="telefon" required
                                    data-translate-placeholder="membership.form.phone.placeholder">
                                <i class="fas fa-phone form-icon"></i>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="address" data-translate="membership.form.address.label">Adres</label>
                            <textarea id="address" name="adres" rows="3" required
                                data-translate-placeholder="membership.form.address.placeholder"></textarea>
                            <i class="fas fa-map-marker-alt form-icon"></i>
                        </div>

                        <div class="form-group">
                            <label for="birthDate" data-translate="membership.form.birthDate.label">Doğum Tarihi</label>
                            <input type="date" id="birthDate" name="dogum_tarihi" required>
                            <i class="fas fa-calendar-alt form-icon"></i>
                        </div>

                        <div class="form-group">
                            <label for="personnummer" data-translate="membership.form.personnummer.label">Kişi Numarası
                                (Personnummer)</label>
                            <input type="text" id="personnummer" name="kisi_numarasi" required
                                data-translate-placeholder="membership.form.personnummer.placeholder">
                            <i class="fas fa-id-card form-icon"></i>
                            <small class="help-text" data-translate="membership.form.personnummer.help">11 haneli Norveç
                                kişi numaranızı girin</small>
                        </div>

                        <!-- Spouse Information Section -->
                        <div class="spouse-section">
                            <div class="section-header">
                                <h3 data-translate="membership.form.spouse.title">Eş Bilgileri</h3>
                                <p data-translate="membership.form.spouse.description">Eşinizin bilgilerini giriniz
                                    (İsteğe bağlı)</p>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="spouseName" data-translate="membership.form.spouse.name.label">Eşin
                                        Adı</label>
                                    <input type="text" id="spouseName" name="es_adi"
                                        data-translate-placeholder="membership.form.spouse.name.placeholder">
                                    <i class="fas fa-user form-icon"></i>
                                </div>
                                <div class="form-group">
                                    <label for="spouseSurname"
                                        data-translate="membership.form.spouse.surname.label">Eşin Soyadı</label>
                                    <input type="text" id="spouseSurname" name="es_soyadi"
                                        data-translate-placeholder="membership.form.spouse.surname.placeholder">
                                    <i class="fas fa-user form-icon"></i>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="spouseBirthDate"
                                        data-translate="membership.form.spouse.birthDate.label">Doğum Tarihi</label>
                                    <input type="date" id="spouseBirthDate" name="es_dogum_tarihi">
                                    <i class="fas fa-calendar-alt form-icon"></i>
                                </div>
                                <div class="form-group">
                                    <label for="spousePersonnummer"
                                        data-translate="membership.form.spouse.personnummer.label">Kişi Numarası</label>
                                    <input type="text" id="spousePersonnummer" name="es_kisi_numarasi"
                                        pattern="[0-9]{11}" maxlength="11"
                                        data-translate-placeholder="membership.form.spouse.personnummer.placeholder">
                                    <i class="fas fa-id-card form-icon"></i>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="spouseEmail"
                                        data-translate="membership.form.spouse.email.label">E-posta</label>
                                    <input type="email" id="spouseEmail" name="es_email"
                                        data-translate-placeholder="membership.form.spouse.email.placeholder">
                                    <i class="fas fa-envelope form-icon"></i>
                                </div>
                                <div class="form-group">
                                    <label for="spousePhone"
                                        data-translate="membership.form.spouse.phone.label">Telefon</label>
                                    <input type="tel" id="spousePhone" name="es_telefon"
                                        data-translate-placeholder="membership.form.spouse.phone.placeholder">
                                    <i class="fas fa-phone form-icon"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Children Information Section -->
                        <div class="children-section">
                            <div class="section-header">
                                <h3 data-translate="membership.form.children.title">👶 Çocuk Bilgileri</h3>
                                <p data-translate="membership.form.children.description">Varsa çocuklarınızın
                                    bilgilerini ekleyiniz</p>
                            </div>

                            <div id="childrenContainer">
                                <!-- Children will be added dynamically here -->
                            </div>

                            <button type="button" class="add-child-btn" id="addChildBtn">
                                <i class="fas fa-plus"></i>
                                <span data-translate="membership.form.children.add">Çocuk Ekle</span>
                            </button>
                        </div>


                        <!-- 
                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="privacy" name="kvkk_onay" required value="Kabul edildi">
                                <span class="checkmark"></span>
                                <span data-translate="membership.form.privacy">Kişisel verilerimin işlenmesini kabul
                                    ediyorum</span>
                            </label>
                        </div> -->

                        <button type="submit" class="submit-btn" id="submitBtn">
                            <i class="fas fa-paper-plane"></i>
                            <span id="submitBtnText" data-translate="membership.form.submit.new">Başvuru Gönder</span>
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <section class="membership-contact">
            <div class="container">
                <div class="contact-info">
                    <h2 data-translate="membership.contact.title">📞 İletişim</h2>
                    <p data-translate="membership.contact.description">
                        Üyelikle ilgili sorularınız için bizimle iletişime geçebilirsiniz.
                    </p>
                    <div class="contact-methods">
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span data-translate="membership.contact.phone">+47 40144008</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span data-translate="membership.contact.email">leder@mevlanamoske.no</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span data-translate="membership.contact.address">Dusavikveien 35, 2 etg, 4007
                                Stavanger</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section footer-about">
                    <div class="footer-logo">
                        <img src="assets/images/logo.png" alt="Diyanet Mevlana Moske">
                        <h3 data-translate="footer.welcome">Diyanet Mevlana Moske'ye Hoş Geldiniz</h3>
                    </div>
                    <p data-translate="footer.description">
                        Stavanger'de bulunan Diyanet Mevlana Moske olarak Müslüman toplumumuza hizmet etmekten gurur
                        duyuyoruz.
                    </p>
                    <p data-translate="footer.org.number">Org.nr: 971 490 942</p>
                    <p>Rogaland Muslimforening</p>
                </div>

                <div class="footer-section footer-contact">
                    <h3 data-translate="footer.contact.title">İletişim</h3>
                    <div class="footer-contact-item">
                        <strong data-translate="footer.contact.phone">Telefon:</strong>
                        <a href="tel:+4740144008">+47 40 14 40 08</a>
                    </div>
                    <div class="footer-contact-item">
                        <strong data-translate="footer.contact.email">E-posta:</strong>
                        <span>leder@mevlanamoske.no</span>
                    </div>
                    <div class="footer-contact-item">
                        <strong data-translate="footer.contact.address">Adres:</strong>
                        <span data-translate="footer.contact.address.text">Økernveien 145, 0580 Stavanger, Norveç</span>
                    </div>
                </div>

                <div class="footer-section footer-map">
                    <h3 data-translate="footer.map.title">Konum</h3>
                    <div class="footer-map-container">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2055.985600021678!2d5.709846899999999!3d58.9819506!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x463bcaab99b5dc1b%3A0x5a7a44893091b694!2sDusavikveien%2035%2C%204007%20Stavanger%2C%20Norve%C3%A7!5e0!3m2!1str!2str!4v1757772294044!5m2!1str!2str"
                            width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p data-translate="footer.copyright">&copy; 2025 Diyanet Mevlana Moske. Tüm hakları saklıdır.</p>
            </div>
        </div>
    </footer>

    <script src="scripts/config.js"></script>
    <script src="scripts/main.js"></script>
    <script>
        // Check for success parameter on page load
        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('success') === 'true') {
                showSuccessMessage('submitted');
                // Remove the success parameter from URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
            updateSubmitButton('new');
        });

        // Radio button change handler
        document.querySelectorAll('input[name="islem_turu"]').forEach(radio => {
            radio.addEventListener('change', function () {
                const type = this.value === 'Yeni Üyelik' ? 'new' : 'cancel';
                updateSubmitButton(type);
                updateFormSubject(this.value);
            });
        });

        // Update form subject based on selection
        function updateFormSubject(type) {
            const subjectField = document.querySelector('input[name="_subject"]');
            if (type === 'Yeni Üyelik') {
                subjectField.value = 'Yeni Üyelik Başvurusu - Diyanet Mevlana Moske';
            } else {
                subjectField.value = 'Üyelik İptal Talebi - Diyanet Mevlana Moske';
            }
        }

        // Update submit button text based on selection
        function updateSubmitButton(type) {
            const submitBtnText = document.getElementById('submitBtnText');
            const submitBtn = document.getElementById('submitBtn');

            if (type === 'new') {
                submitBtnText.textContent = translations[currentLanguage]['membership.form.submit.new'] || 'Başvuru Gönder';
                submitBtn.querySelector('i').className = 'fas fa-paper-plane';
            } else if (type === 'cancel') {
                submitBtnText.textContent = translations[currentLanguage]['membership.form.submit.cancel'] || 'Üyelik İptal';
                submitBtn.querySelector('i').className = 'fas fa-times-circle';
            }
        }

        // Form submission handler
        // document.getElementById('membershipForm').addEventListener('submit', function (e) {
        //     // Show loading state
        //     const submitBtn = document.getElementById('submitBtn');
        //     const originalContent = submitBtn.innerHTML;
        //     submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>Gönderiliyor...</span>';
        //     submitBtn.disabled = true;

        //     // Let FormSubmit handle the actual submission
        //     // The form will redirect to the success page automatically

        //     // If there's an error, restore the button (this won't run if successful)
        //     setTimeout(() => {
        //         submitBtn.innerHTML = originalContent;
        //         submitBtn.disabled = false;
        //     }, 5000);
        // });

        function showSuccessMessage(type) {
            let successMessage;
            if (type === 'submitted') {
                successMessage = translations[currentLanguage]['membership.form.success.submitted'] ||
                    'Formunuz başarıyla gönderildi! En kısa sürede sizinle iletişime geçeceğiz.';
            }

            // Create a nice success notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #28a745, #20c997);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
                z-index: 10000;
                font-weight: 500;
                animation: slideIn 0.3s ease-out;
            `;
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="margin-right: 0.5rem;"></i>
                ${successMessage}
            `;

            document.body.appendChild(notification);

            // Remove notification after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 5000);
        }

        // Add animation keyframes
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>